{"ast":null,"code":"import { logoutUser } from \"./authActions\";\nexport const FETCH_CLASSES_REQUEST = \"FETCH_CLASSES_REQUEST\";\nexport const FETCH_CLASSES_SUCCESS = \"FETCH_CLASSES_SUCCESS\";\nexport const FETCH_CLASSES_FAILURE = \"FETCH_CLASSES_FAILURE\";\nconst requestClasses = () => {\n  return {\n    type: FETCH_CLASSES_REQUEST\n  };\n};\nconst receiveClasses = data => {\n  return {\n    type: FETCH_CLASSES_SUCCESS,\n    data\n  };\n};\nconst ClassesError = () => {\n  return {\n    type: FETCH_CLASSES_FAILURE\n  };\n};\nexport const fetchClasses = values => dispatch => {\n  dispatch(requestClasses());\n  const requestOptions = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: localStorage.getItem(\"token\")\n    }\n  };\n  fetch(\"/teacher/classes\", requestOptions).then(response => response.json()).then(data => {\n    var _data$error;\n    if ((data === null || data === void 0 ? void 0 : (_data$error = data.error) === null || _data$error === void 0 ? void 0 : _data$error.name) === \"TokenExpiredError\") {\n      dispatch(logoutUser());\n    } else {\n      const filteredDupicates = data.obj.filter((v, i, a) => a.findIndex(t => t.className === v.className) === i);\n      dispatch(receiveClasses(filteredDupicates));\n    }\n  }).catch(error => {\n    console.log(error);\n    //Do something with the error if you want!\n    dispatch(ClassesError());\n  });\n};","map":{"version":3,"names":["logoutUser","FETCH_CLASSES_REQUEST","FETCH_CLASSES_SUCCESS","FETCH_CLASSES_FAILURE","requestClasses","type","receiveClasses","data","ClassesError","fetchClasses","values","dispatch","requestOptions","method","headers","Authorization","localStorage","getItem","fetch","then","response","json","_data$error","error","name","filteredDupicates","obj","filter","v","i","a","findIndex","t","className","catch","console","log"],"sources":["D:/Final year project/project_repo/EduSync/client/esm-client/src/actions/classesActions.js"],"sourcesContent":["import { logoutUser } from \"./authActions\";\r\nexport const FETCH_CLASSES_REQUEST = \"FETCH_CLASSES_REQUEST\";\r\nexport const FETCH_CLASSES_SUCCESS = \"FETCH_CLASSES_SUCCESS\";\r\nexport const FETCH_CLASSES_FAILURE = \"FETCH_CLASSES_FAILURE\";\r\n\r\nconst requestClasses = () => {\r\n  return {\r\n    type: FETCH_CLASSES_REQUEST,\r\n  };\r\n};\r\n\r\nconst receiveClasses = (data) => {\r\n  return {\r\n    type: FETCH_CLASSES_SUCCESS,\r\n    data,\r\n  };\r\n};\r\n\r\nconst ClassesError = () => {\r\n  return {\r\n    type: FETCH_CLASSES_FAILURE,\r\n  };\r\n};\r\n\r\nexport const fetchClasses = (values) => (dispatch) => {\r\n  dispatch(requestClasses());\r\n\r\n  const requestOptions = {\r\n    method: \"GET\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: localStorage.getItem(\"token\"),\r\n    },\r\n  };\r\n  fetch(\"/teacher/classes\", requestOptions)\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      if (data?.error?.name === \"TokenExpiredError\") {\r\n        dispatch(logoutUser());\r\n      } else {\r\n        const filteredDupicates = data.obj.filter(\r\n          (v, i, a) => a.findIndex((t) => t.className === v.className) === i\r\n        );\r\n        dispatch(receiveClasses(filteredDupicates));\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      console.log(error);\r\n      //Do something with the error if you want!\r\n      dispatch(ClassesError());\r\n    });\r\n};\r\n"],"mappings":"AAAA,SAASA,UAAU,QAAQ,eAAe;AAC1C,OAAO,MAAMC,qBAAqB,GAAG,uBAAuB;AAC5D,OAAO,MAAMC,qBAAqB,GAAG,uBAAuB;AAC5D,OAAO,MAAMC,qBAAqB,GAAG,uBAAuB;AAE5D,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAC3B,OAAO;IACLC,IAAI,EAAEJ;EACR,CAAC;AACH,CAAC;AAED,MAAMK,cAAc,GAAIC,IAAI,IAAK;EAC/B,OAAO;IACLF,IAAI,EAAEH,qBAAqB;IAC3BK;EACF,CAAC;AACH,CAAC;AAED,MAAMC,YAAY,GAAGA,CAAA,KAAM;EACzB,OAAO;IACLH,IAAI,EAAEF;EACR,CAAC;AACH,CAAC;AAED,OAAO,MAAMM,YAAY,GAAIC,MAAM,IAAMC,QAAQ,IAAK;EACpDA,QAAQ,CAACP,cAAc,CAAC,CAAC,CAAC;EAE1B,MAAMQ,cAAc,GAAG;IACrBC,MAAM,EAAE,KAAK;IACbC,OAAO,EAAE;MACP,cAAc,EAAE,kBAAkB;MAClCC,aAAa,EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO;IAC7C;EACF,CAAC;EACDC,KAAK,CAAC,kBAAkB,EAAEN,cAAc,CAAC,CACtCO,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACnCF,IAAI,CAAEZ,IAAI,IAAK;IAAA,IAAAe,WAAA;IACd,IAAI,CAAAf,IAAI,aAAJA,IAAI,wBAAAe,WAAA,GAAJf,IAAI,CAAEgB,KAAK,cAAAD,WAAA,uBAAXA,WAAA,CAAaE,IAAI,MAAK,mBAAmB,EAAE;MAC7Cb,QAAQ,CAACX,UAAU,CAAC,CAAC,CAAC;IACxB,CAAC,MAAM;MACL,MAAMyB,iBAAiB,GAAGlB,IAAI,CAACmB,GAAG,CAACC,MAAM,CACvC,CAACC,CAAC,EAAEC,CAAC,EAAEC,CAAC,KAAKA,CAAC,CAACC,SAAS,CAAEC,CAAC,IAAKA,CAAC,CAACC,SAAS,KAAKL,CAAC,CAACK,SAAS,CAAC,KAAKJ,CACnE,CAAC;MACDlB,QAAQ,CAACL,cAAc,CAACmB,iBAAiB,CAAC,CAAC;IAC7C;EACF,CAAC,CAAC,CACDS,KAAK,CAAEX,KAAK,IAAK;IAChBY,OAAO,CAACC,GAAG,CAACb,KAAK,CAAC;IAClB;IACAZ,QAAQ,CAACH,YAAY,CAAC,CAAC,CAAC;EAC1B,CAAC,CAAC;AACN,CAAC"},"metadata":{},"sourceType":"module"}